#!/bin/bash

# mxc: path=/home/meta/.config/mxc/fzf.mx

# original template ~/dev/meta/confsubst/templates/fzf-opts.sh

export SKIM_DEFAULT_COMMAND="find . -type f || git ls-tree -r --name-only HEAD || rg --files || find ."

# --header-lines=1
export SKIM_DEFAULT_OPTIONS='--height=50%
--multi
--prompt="􂨬 "
--cmd-prompt="􂨩 "
--inline-info
--layout=default
--preview="[[ $(file -ib {+} | cut -d/ -f1) == text ]] && bat --style=numbers {-1};"
--preview-window "+{2}-/2"
--bind "enter:execute(nvim {})"
--bind "ctrl-y:yank"
--bind "ctrl-s:toggle-sort"
--bind "ctrl-t:toggle-preview-wrap"
--bind "ctrl-a:select-all+accept"
--bind "ctrl-d:if-query-empty(abort)+delete-char"
--color "matched_bg:#000000,matched:#EE2255,current_match:#000000,current_match_bg:#EE2255,bg+:#3344CC,fg+:#FFFFFF,info:#22AA11,prompt:#3344CC,pointer:#AABB22,header:#5544FF,border:#223344,spinner:#3399AA,query:#22AA11,marker:#AABB22"'

export FZF_COMPLETION_AUTO_COMMON_PREFIX=true
export FZF_COMPLETION_AUTO_COMMON_PREFIX_PART=true

export FZF_HEIGHTS='90%'

export FZF_DEFAULT_OPTS="
--preview='bash -c \"\$(which mpreview) {}\"'
--preview-window=right:hidden:wrap
--hscroll-off=400
--bind='ctrl-/:toggle-preview'
--bind=ctrl-s:toggle-sort
--height=${FZF_HEIGHTS:-100%}
--layout=reverse
--info=inline
--ansi
--no-border
--color=gutter:#223344
--color=fg:#BBDDFF,hl:#EE2255
--color=fg+:#FFFFFF,bg+:#3344CC,hl+:#22AA11
--color=info:#22AA11,prompt:#3344CC,pointer:#EE2255
--color=marker:#22AA11,spinner:#3399AA,header:#5544FF"

export FZF_CTRL_R_OPTS="
--preview='echo {}'
--preview-window=up:3:hidden:wrap
--bind='ctrl-/:toggle-preview'
--bind='ctrl-y:execute-silent(echo -n {2..} | xclip -selection c)+abort'
--color=header:italic
--header 'Press CTRL-Y to copy command into clipboard'"

export FZF_ALT_C_OPTS="--preview 'tree -C {}'"

export FZF_COMPLETION_OPTS='--border --info=inline'

# vim: ts=2 sts=2 sw=2 ft=bash et

